module.exports=(n,w)=>{const o={d:[],p:[]};n.forEach((t,r)=>{t===1?o.d.push(r):t&&o.p.push(r)});const s=o.d.length,m=o.p.length;if(m>1)return (()=>{let b={};const x=(y,z)=>y^z;let g=n.reduce(x);if(g)n.every((m,r)=>((m,r)=>{if(m){let u=[...n];if(g<=m&&(u[r]-=g,!u.reduce(x)))return b={take:g,fromRow:r},!1;const c=m-(m^g);if(c>0&&((u=[...n])[r]-=c,!u.reduce(x)))return b={take:c,fromRow:r},!1}return!0})(m,r));else{const h=Math.max(...n),r=n.indexOf(h);b={take:1,fromRow:r}}return b})();if(m){const r=o.p[0],g=n[r];return s%2?{take:g-!!w,fromRow:r}:{take:g-!w,fromRow:r}}return{take:1,fromRow:o.d[0]}}